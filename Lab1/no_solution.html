<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Stephen Ellner, modified by Ben Bolker &amp; Bob Douma.">
<meta name="author" content="Adapted by Alejandro Morales.">
<meta name="dcterms.date" content="2025-10-27">

<title>Practical Labs CSA-40306 Ecological Modelling and Data Analysis in R - Lab 1: An introduction to R for ecological modeling</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../Lab1/no_solution.html">Lab 1</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Practical Labs CSA-40306 Ecological Modelling and Data Analysis in R</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Lab1/no_solution.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Lab 1</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Lab2/no_solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 2</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Lab3/no_solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 3</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Lab4/no_solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 4</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Lab6/no_solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 5 &amp; 6</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Lab7/no_solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 7</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Lab9/no_solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 9</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Lab10/no_solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 10</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Supplements/optim.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Supplement: mle2 vs optim</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Supplements/canned.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Supplement: Canned methods</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Supplements/bias_variance/no_solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Supplement: Variance and bias of estimates</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
 <span class="menu-text">Solutions</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Lab1/solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 1 (solutions)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Lab2/solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 2 (solutions)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Lab3/solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 3 (solutions)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Lab4/solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 4 (solutions)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Lab6/solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 5 &amp; 6 (solutions)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Lab7/solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 7 (solutions)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Lab9/solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 9 (solutions)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Lab10/solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 10 (solutions)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Supplements/bias_variance/solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Variance and bias of estimates (solutions)</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#learning-outcomes" id="toc-learning-outcomes" class="nav-link active" data-scroll-target="#learning-outcomes"><span class="header-section-number">1</span> Learning outcomes</a></li>
  <li><a href="#r-for-beginners" id="toc-r-for-beginners" class="nav-link" data-scroll-target="#r-for-beginners"><span class="header-section-number">2</span> R for beginners</a>
  <ul class="collapse">
  <li><a href="#how-to-use-this-tutorial" id="toc-how-to-use-this-tutorial" class="nav-link" data-scroll-target="#how-to-use-this-tutorial"><span class="header-section-number">2.1</span> How to use this tutorial</a></li>
  <li><a href="#what-is-r" id="toc-what-is-r" class="nav-link" data-scroll-target="#what-is-r"><span class="header-section-number">2.2</span> What is <code>R</code>?</a></li>
  <li><a href="#installing-r-on-your-computer-basics" id="toc-installing-r-on-your-computer-basics" class="nav-link" data-scroll-target="#installing-r-on-your-computer-basics"><span class="header-section-number">2.3</span> Installing <code>R</code> on your computer: basics</a></li>
  <li><a href="#installing-and-using-rstudio" id="toc-installing-and-using-rstudio" class="nav-link" data-scroll-target="#installing-and-using-rstudio"><span class="header-section-number">2.4</span> Installing and using Rstudio</a></li>
  <li><a href="#the-r-package-system" id="toc-the-r-package-system" class="nav-link" data-scroll-target="#the-r-package-system"><span class="header-section-number">2.5</span> The <code>R</code> package system</a></li>
  <li><a href="#interactive-calculations-in-the-console" id="toc-interactive-calculations-in-the-console" class="nav-link" data-scroll-target="#interactive-calculations-in-the-console"><span class="header-section-number">2.6</span> Interactive calculations in the console</a></li>
  <li><a href="#the-help-system" id="toc-the-help-system" class="nav-link" data-scroll-target="#the-help-system"><span class="header-section-number">2.7</span> The help system</a></li>
  </ul></li>
  <li><a href="#scripts-and-reading-data" id="toc-scripts-and-reading-data" class="nav-link" data-scroll-target="#scripts-and-reading-data"><span class="header-section-number">3</span> Scripts and Reading Data</a>
  <ul class="collapse">
  <li><a href="#using-scripts-and-data-files" id="toc-using-scripts-and-data-files" class="nav-link" data-scroll-target="#using-scripts-and-data-files"><span class="header-section-number">3.1</span> Using scripts and data files</a></li>
  <li><a href="#typical-workflow-in-r-an-example-using-linear-regression" id="toc-typical-workflow-in-r-an-example-using-linear-regression" class="nav-link" data-scroll-target="#typical-workflow-in-r-an-example-using-linear-regression"><span class="header-section-number">3.2</span> Typical workflow in <code>R</code>: an example using linear regression</a></li>
  </ul></li>
  <li><a href="#data-types" id="toc-data-types" class="nav-link" data-scroll-target="#data-types"><span class="header-section-number">4</span> Data types</a>
  <ul class="collapse">
  <li><a href="#vectors" id="toc-vectors" class="nav-link" data-scroll-target="#vectors"><span class="header-section-number">4.1</span> Vectors</a>
  <ul class="collapse">
  <li><a href="#functions-for-creating-vectors" id="toc-functions-for-creating-vectors" class="nav-link" data-scroll-target="#functions-for-creating-vectors"><span class="header-section-number">4.1.1</span> Functions for creating vectors</a></li>
  <li><a href="#vector-indexing" id="toc-vector-indexing" class="nav-link" data-scroll-target="#vector-indexing"><span class="header-section-number">4.1.2</span> Vector indexing</a></li>
  <li><a href="#logical-operators" id="toc-logical-operators" class="nav-link" data-scroll-target="#logical-operators"><span class="header-section-number">4.1.3</span> Logical operators</a></li>
  </ul></li>
  <li><a href="#matrices" id="toc-matrices" class="nav-link" data-scroll-target="#matrices"><span class="header-section-number">4.2</span> Matrices</a>
  <ul class="collapse">
  <li><a href="#creating-matrices" id="toc-creating-matrices" class="nav-link" data-scroll-target="#creating-matrices"><span class="header-section-number">4.2.1</span> Creating matrices</a></li>
  <li><a href="#cbind-and-rbind" id="toc-cbind-and-rbind" class="nav-link" data-scroll-target="#cbind-and-rbind"><span class="header-section-number">4.2.2</span> <code>cbind</code> and <code>rbind</code></a></li>
  <li><a href="#matrix-indexing" id="toc-matrix-indexing" class="nav-link" data-scroll-target="#matrix-indexing"><span class="header-section-number">4.2.3</span> Matrix indexing</a></li>
  </ul></li>
  <li><a href="#lists" id="toc-lists" class="nav-link" data-scroll-target="#lists"><span class="header-section-number">4.3</span> Lists</a></li>
  <li><a href="#data-frames" id="toc-data-frames" class="nav-link" data-scroll-target="#data-frames"><span class="header-section-number">4.4</span> Data frames</a></li>
  </ul></li>
  <li><a href="#references-acknowlegdements" id="toc-references-acknowlegdements" class="nav-link" data-scroll-target="#references-acknowlegdements"><span class="header-section-number">5</span> References &amp; Acknowlegdements</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab 1: An introduction to <code>R</code> for ecological modeling</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-contents">
             <p>Stephen Ellner, modified by Ben Bolker &amp; Bob Douma. </p>
             <p>Adapted by Alejandro Morales. </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 27, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="learning-outcomes" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Learning outcomes</h1>
<p>The aim of this tutorial is to learn the basics of <code>R</code>. After completing the tutorial you will be able to:</p>
<ol type="1">
<li><p>Install <code>R</code> and associated packages and Rstudio</p></li>
<li><p>Do interactive calculations in the <code>R</code> console</p></li>
<li><p>Consult the built-in help in <code>R</code></p></li>
<li><p>Create, modify and run <code>R</code> scripts</p></li>
<li><p>Setup a typical workflow in <code>R</code> (loading libraries, reading data, doing statistics and saving results)</p></li>
<li><p>Work with the most common data types in <code>R</code> (vectors, matrices, lists and data frames)</p></li>
</ol>
</section>
<section id="r-for-beginners" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> R for beginners</h1>
<section id="how-to-use-this-tutorial" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="how-to-use-this-tutorial"><span class="header-section-number">2.1</span> How to use this tutorial</h2>
<ul>
<li><p>This tutorial contains many sample calculations. It is important to do these yourself—<strong>type them in at your keyboard and see what happens on your screen</strong>—to get the feel of working in <code>R</code>.</p></li>
<li><p><strong>Exercises</strong> in the middle of a section should be done inmediately, and make sure you have them rightly solved before moving on. Some other, more challenging, exercises appear at the end of some sections, and these can be left until later.</p></li>
</ul>
</section>
<section id="what-is-r" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="what-is-r"><span class="header-section-number">2.2</span> What is <code>R</code>?</h2>
<p><code>R</code> is an object-oriented scripting language that</p>
<ul>
<li><p>can be used for numerical simulation of deterministic and stochastic dynamic models.</p></li>
<li><p>has an extensive set of functions for classical and modern statistical data analysis and modeling.</p></li>
<li><p>has graphics functions for visualizing data and model output</p></li>
<li><p>a user interface with a few basic menus and extensive help facilities</p></li>
</ul>
<p><code>R</code> is an open source project, available for free download via the Web. Originally a research project in statistical computing it is now managed by a development team that includes a number of well-regarded statisticians. It is widely used by statistical researchers and a growing number of theoretical ecologists and ecological modelers as a platform for making new methods available to users.</p>
</section>
<section id="installing-r-on-your-computer-basics" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="installing-r-on-your-computer-basics"><span class="header-section-number">2.3</span> Installing <code>R</code> on your computer: basics</h2>
<p>If <code>R</code> is already installed on your computer, you can skip this section.</p>
<p>The main source for <code>R</code> is the CRAN home page <code>http://cran.r-project.org</code>. You can get the source code, but most users will prefer a precompiled version. To get one of these from CRAN:</p>
<ul>
<li><p>go to <code>http://cran.r-project.org/mirrors.html</code> and find a mirror site that is geographically somewhat near you.</p></li>
<li><p>Find the appropriate page for your operating system — when you get to the download section, go to <code>base</code> rather than <code>contrib</code>. Download the binary file (e.g.&nbsp;<code>base/R-x.y.z-win32.exe</code> for Windows, <code>R-x.y.z.dmg</code> for MacOS, where <code>x.y.z</code> is the version number). The binary files are large (30–60 megabytes) — you will need to find a fast internet connection.</p></li>
<li><p>Read and follow the instructions (which are pretty much “click on the icon”).</p></li>
</ul>
</section>
<section id="installing-and-using-rstudio" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="installing-and-using-rstudio"><span class="header-section-number">2.4</span> Installing and using Rstudio</h2>
<p>Nowadays programs are available that integrate <code>R</code> in a sophisticated way by combining a console, a <em>syntax highlighting</em> editor (giving colors to <code>R</code> commands and allowing you to identify missing parentheses, quotation marks etc.), tools for plotting, debugging, workspace management and connections to versioning systems into one program. Rstudio is currently the most advanced wrapper around R and is highly recommended if <code>R</code> is the core of your work. Rstudio can be found and downloaded at https://www.rstudio.com.</p>
<p>If a new <code>R</code> version is launched after you installed Rstudio, you can change the <code>R</code> version that is used in Rstudio by clicking on <code>Tools</code> and <code>Global Options</code>, choose <code>R general</code> and select the location of the most recent <code>R</code> version.</p>
<p>Rstudio usually displays four panels. The default setting is a script editor at the top-left of the screen, the console at the bottom-left, the global environment (which shows what is stored in the memory) at the top-right, and a plotting region at bottom-right. As you see some panel have multiple tabs that include other useful features such as the help (bottom-right), the (available and loaded) packages (bottom-right) etc.</p>
</section>
<section id="the-r-package-system" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="the-r-package-system"><span class="header-section-number">2.5</span> The <code>R</code> package system</h2>
<p>The standard distributions of <code>R</code> include several <em>packages</em>, user-contributed suites of add-on functions. This lab uses some packages that are not part of the standard distribution. In general, you can install additional packages from within <code>R</code> using the <code>Packages</code> menu, or the <code>install.packages</code> command.</p>
<p>You may be able to install new packages from a menu within <code>R</code>. Type and it will install the package <code>ggplot2</code> that you will use in the next tutorial.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(for example — this installs the <code>ggplot2</code> package). You can install more than one package at a time:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">"ggplot2"</span>,<span class="st">"nlme"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(<code>c</code> stands for “combine”, and is the command for combining multiple things into a single object.)</p>
<p>Some of the important functions and packages (collections of functions) for statistical modeling and data analysis are summarized in Table 2. Venables and Ripley (2002) give a good practical (although somewhat advanced) overview, and you can find a list of available packages and their contents at CRAN, the main <code>R</code> website (http://www.cran.r-project.org — select a mirror site near you and click on <code>Package sources</code>). For the most part, we will not be concerned here with this side of <code>R</code>.</p>
</section>
<section id="interactive-calculations-in-the-console" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="interactive-calculations-in-the-console"><span class="header-section-number">2.6</span> Interactive calculations in the console</h2>
<p>The console is where you enter commands for <code>R</code> to execute <em>interactively</em>, meaning that the command is executed and the result is displayed as soon as you hit the <code>Enter</code> key (bottom-left panel in Rstudio). For example, at the command prompt <code>&gt;</code>, type in <code>2+2</code> and hit <code>Enter</code></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">+</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To do anything complicated, you have to store the results from calculations by <em>assigning</em> them to variables, using <code>=</code> or <code>&lt;-</code>. For example:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">=</span> <span class="dv">2</span><span class="sc">+</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>R</code> automatically creates the variable <code>a</code> and stores the result (4) in it, but it doesn’t print anything. This may seem strange, but you’ll often be creating and manipulating huge sets of data that would fill many screens, so the default is to skip printing the results. To ask <code>R</code> to print the value, just type the variable name by itself at the command prompt:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(the <code>[1]</code> at the beginning of the line is just <code>R</code> printing an index of element numbers; if you print a result that displays on multiple lines, <code>R</code> will put an index at the beginning of each line. <code>print(a)</code> also works to print the value of a variable.) By default, a variable created this way is a <em>vector</em>, and it is <em>numeric</em> because we gave <code>R</code> a number rather than some other type of data (e.g.&nbsp;a character string like <code>"pxqr"</code>). In this case <code>a</code> is a numeric vector of length 1, which acts just like a number.</p>
<p>You could also type <code>a=2+2; a</code>, using a semicolon to put two or more commands on a single line. Conversely, you can break lines <em>anywhere that <code>R</code> can tell you haven’t finished your command</em> and <code>R</code> will give you a “continuation” prompt (<code>+</code>) to let you know that it doesn’t think you’re finished yet: try typing</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">=</span> <span class="dv">3</span><span class="sc">*</span>(<span class="dv">4</span> <span class="sc">+</span> [Enter]</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>to see what happens. You will sometimes see the continuation prompt when you don’t expect it, e.g.&nbsp;if you forget to close parentheses.If you get stuck continuing a command you don’t want—e.g.&nbsp;you opened the wrong parentheses—just hit the <code>Escape</code> key or the stop icon in the menu bar to get out.</p>
<p>Variable names in <code>R</code> must begin with a letter, followed by letters or numbers. You can break up long names with a period, as in <code>very.long.variable.number.3</code>, or an underscore (<code>_</code>), but you can’t use blank spaces in variable names (or at least it’s not worth the trouble). Variable names in <code>R</code> are case sensitive, so <code>Abc</code> and <code>abc</code> are different variables. Make variable names long enough to remember, short enough to type.<code>N.per.ha</code> or <code>pop.density</code> are better than <code>x</code> and <code>y</code> (too short) or <code>available.nitrogen.per.hectare</code> (too long). Avoid <code>c</code>, <code>l</code>, <code>q</code>, <code>t</code>, <code>C</code>, <code>D</code>, <code>F</code>, <code>I</code>, and <code>T</code>, which are either built-in <code>R</code> functions or hard to tell apart.</p>
<p><code>R</code> does calculations with variables as if they were numbers. It uses <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, and <code>^</code> for addition, subtraction, multiplication, division and exponentiation, respectively. For example:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="dv">2</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>z1 <span class="ot">=</span> x<span class="sc">*</span>y <span class="do">## no output</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>z2 <span class="ot">=</span> x<span class="sc">/</span>y <span class="do">## no output</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>z3 <span class="ot">=</span> x<span class="sc">^</span>y <span class="do">## no output</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>z2</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>z3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Even though <code>R</code> did not display the values of <code>x</code> and <code>y</code>, it “remembers” that it assigned values to them. Type <code>x; y</code> to display the values.</p>
<p>You can retrieve and edit previous commands. The up-arrow (<span class="math inline">\(\uparrow\)</span>) in the console recalls previous commands to the prompt. They also can be found in the top-right tab <code>History</code>. For example, you can bring back the second-to-last command and edit it into</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>z3 <span class="ot">=</span> <span class="dv">2</span><span class="sc">*</span>x<span class="sc">^</span>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can combine several operations in one calculation:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">=</span> <span class="dv">3</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>C <span class="ot">=</span> (A<span class="sc">+</span><span class="dv">2</span><span class="sc">*</span><span class="fu">sqrt</span>(A))<span class="sc">/</span>(A<span class="sc">+</span><span class="dv">5</span><span class="sc">*</span><span class="fu">sqrt</span>(A))</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>C</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Parentheses specify the order of operations. The command</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>C <span class="ot">=</span> A <span class="sc">+</span> <span class="dv">2</span><span class="sc">*</span><span class="fu">sqrt</span>(A)<span class="sc">/</span>A <span class="sc">+</span> <span class="dv">5</span><span class="sc">*</span><span class="fu">sqrt</span>(A)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>is not the same as the one above; rather, it is equivalent to <code>C=A + 2*(sqrt(A)/A) + 5*sqrt(A)</code>.</p>
<p>The default order of operations is: (1) parentheses; (2) exponentiation, or powers, (3) multiplication and division, (4) addition and subtraction.</p>
<p>b = 12-4/2^3 gives 12 - 4/8 = 12 - 0.5 = 11.5</p>
<p>b = (12-4)/2^3 gives 8/8 = 1</p>
<p>b = -1^2 gives -(1^2) = -1</p>
<p>b = (-1)^2 gives 1</p>
<p>In complicated expressions you might start off by <em>using parentheses to specify explicitly what you want</em>, such as b = 12 - (4/(2^3)) or at least b = 12 - 4/(2^3); a few extra sets of parentheses never hurt, although when you get confused it’s better to think through the order of operations rather than flailing around adding parentheses at random. <code>R</code> also has many <em>built-in mathematical functions</em> that operate on variables (Table 1 shows a few).</p>
<div class="callout callout-style-default callout-important callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Using editing shortcuts wherever you can, have <code>R</code> compute the values of:</p>
<ol type="1">
<li><p><span class="math inline">\(\frac{2^7}{2^7 - 1}\)</span> and compare it with <span class="math inline">\(\left({1 - \frac{1}{2^7}}\right)^{-1}\)</span></p></li>
<li><ul>
<li><span class="math inline">\(1 + 0.2\)</span></li>
<li><span class="math inline">\(1 + 0.2 + 0.2^2/2 + \cos(2.3)\)</span></li>
<li><span class="math inline">\(\log(1)\)</span></li>
<li><span class="math inline">\(\exp(0.2)\)</span></li>
</ul></li>
<li><p>The standard normal probability density, <span class="math inline">\(\frac{1}{\sqrt(2\pi)}\exp(-x^2/2)\)</span>, for values of <span class="math inline">\(x=1\)</span> and <span class="math inline">\(x=2\)</span> (<code>R</code> knows <span class="math inline">\(\pi\)</span> as <code>pi</code>). You can check your answers against the built-in function for the normal distribution; <code>dnorm(1)</code> and <code>dnorm(2)</code> should give you the values for the standard normal for <span class="math inline">\(x=1\)</span> and <span class="math inline">\(x=2\)</span>.</p></li>
</ol>
</div>
</div>
</div>
</section>
<section id="the-help-system" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="the-help-system"><span class="header-section-number">2.7</span> The help system</h2>
<p>R has a help system, although it is generally better for providing detail or reminding you how to do things than for basic ``how do I …?’’ questions.</p>
<ul>
<li>You can get help on any R function by entering</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>?foo</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Where <code>foo</code> is the name of the function you are interested in (e.g., try <code>?sin</code>).</p>
<ul>
<li><p><code>??topic</code> or <code>help.search("topic")</code> (with quotes) will list information related to <code>topic</code> available in the base system or in any extra installed packages: then use <code>?topic</code> to see the information, perhaps using <code>library(pkg)</code> to load the appropriate package first. <code>help.search</code> uses “fuzzy matching” — for example, <code>help.search("log")</code> finds 528 entries (on my particular system) including lots of functions with “plot”, which includes the letters “lot”, which are <em>almost</em> like “log”. If you can’t stand it, you can turn this behavior off by specifying the incantation <code>help.search("log",agrep=FALSE)</code> (81 results which still include matches for “logistic”, “myelogenous”, and “phylogeny” …)</p></li>
<li><p>On-line help resources - just google it. In our experience, the help provided by <code>R</code> requires some experience in the <code>R</code> language to be able to understand it. Therefore, a general, but practical advice is to google your problem. In 99.9% of the cases someone else had a similar question in the past which were solved by the <code>R</code> community. Start you search string with “R-help” helps to filter relevant webpages. Place were you likely will find answers are https://stackoverflow.com or https://stat.ethz.ch.</p></li>
</ul>
</section>
</section>
<section id="scripts-and-reading-data" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Scripts and Reading Data</h1>
<section id="using-scripts-and-data-files" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="using-scripts-and-data-files"><span class="header-section-number">3.1</span> Using scripts and data files</h2>
<p>Modeling and complicated data analysis are often much easier if you use <em>scripts</em>, which are a series of commands stored in a text file. Scripting has a number of advantages and should be standard practice when doing statstics for reasons of transparency (you can see what you have done), repeatability (tomorrow you will get the same result as today) and transferability (a colleague can easily check what you have done and redo your analysis). Even for relatively simple tasks, script files are useful for building up a calculation step-by-step, making sure that each part works before adding on to it. We recommend you making a habit typing all commands in a script editor before sending it the console, otherwise important parts of your analysis may get lost because you did not store them.</p>
<p>Rstudio has an advanced script editor that recognizes <code>R</code> syntax by giving different colors to different <code>R</code> commands and by automatic completion of parentheses. You can also use Windows Notepad or Wordpad but you <strong>should not</strong> use MS Word.</p>
<p>Most programs for working with models or analyzing data follow a simple pattern of program parts:</p>
<ol type="1">
<li><p>“Setup” statements. For example, load some packages, or run another script file that creates some functions (more on functions later).</p></li>
<li><p>Input some data from a file or the keyboard. For example, read in data from a text file.</p></li>
<li><p>Carry out the calculations that you want. For example, fit several statistical models to the data and compare them.</p></li>
<li><p>Print the results, graph them, or save them to a file. For example, graph the results, and save the graph to disk for including in your term project.</p></li>
</ol>
<p>To tell <code>R</code> where data and script files are located, you can do any one of the following:</p>
<ul>
<li><p>spell out the <em>path</em>, or file location, explicitly. (Use a single forward slash to separate folders (e.g.&nbsp;<code>"c:/My Documents/R/script.R"</code>): this works on all platforms.)</p></li>
<li><p>change your working directory to wherever the file(s) are located using the <code>setwd</code> (<strong>set</strong> <strong>w</strong>orking <strong>d</strong>irectory) function, e.g.&nbsp;<code>setwd("c:/temp")</code> or through clicking on ‘Session’ and ‘set working directory’. Changing your working directory is more efficient in the long run, if you save all the script and data files for a particular project in the same directory and switch to that directory when you start work.</p></li>
</ul>
</section>
<section id="typical-workflow-in-r-an-example-using-linear-regression" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="typical-workflow-in-r-an-example-using-linear-regression"><span class="header-section-number">3.2</span> Typical workflow in <code>R</code>: an example using linear regression</h2>
<p>To get a feel for a typical workflow in R we’ll fit a straight-line model (linear regression) to data.</p>
<p>Start a blank <code>R</code> script (File -&gt; New File -&gt; R script) and save it on a convenient location.</p>
<p>Below are some data on the maximum growth rate <span class="math inline">\(r_{max}\)</span> of laboratory populations of the green alga <em>Chlorella vulgaris</em> as a function of light intensity (<span class="math inline">\(\mu\)</span>E per m<span class="math inline">\(^2\)</span> per second). These experiments were run during the system-design phase of the study reported by Fussman et al.&nbsp;(2000).</p>
<p>Light: 20, 20, 20, 20, 21, 24, 44, 60, 90, 94, 101</p>
<p><span class="math inline">\(r_{max}\)</span>: 1.73, 1.65, 2.02, 1.89, 2.61, 1.36, 2.37, 2.08, 2.69, 2.32, 3.67</p>
<p>To analyze these data in R, first enter them as numerical <em>vectors</em> in your script and send them to the console:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>Light <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">20</span>,<span class="dv">20</span>,<span class="dv">20</span>,<span class="dv">21</span>,<span class="dv">24</span>,<span class="dv">44</span>,<span class="dv">60</span>,<span class="dv">90</span>,<span class="dv">94</span>,<span class="dv">101</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>rmax <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.73</span>,<span class="fl">1.65</span>,<span class="fl">2.02</span>,<span class="fl">1.89</span>,<span class="fl">2.61</span>,<span class="fl">1.36</span>,<span class="fl">2.37</span>,<span class="fl">2.08</span>,<span class="fl">2.69</span>,<span class="fl">2.32</span>,<span class="fl">3.67</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The function <code>c</code> <em>combines</em> the individual numbers into a vector. Try recalling (with <span class="math inline">\(\uparrow\)</span>) and modifying the above command to</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>Light<span class="ot">=</span><span class="dv">20</span>,<span class="dv">20</span>,<span class="dv">20</span>,<span class="dv">20</span>,<span class="dv">21</span>,<span class="dv">24</span>,<span class="dv">44</span>,<span class="dv">60</span>,<span class="dv">90</span>,<span class="dv">94</span>,<span class="dv">101</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>and see the error message you get: in order to create a vector of specified numbers, you <strong>must</strong> use the <code>c</code> function. Don’t be afraid of error messages: the answer to “what would happen if I …?” is usually “try it and see!”</p>
<p>To see a histogram of the growth rates enter <code>hist(rmax)</code>, which opens a graphics window and displays the histogram. There are <em>many</em> other built-in statistics functions: for example <code>mean(rmax)</code> computes you the mean, and <code>sd(rmax)</code> and <code>var(rmax)</code> compute the standard deviation and variance, respectively. Play around with these functions, and any others you can think of.</p>
<p>To see how light intensity affects algal rate of increase, type</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(rmax <span class="sc">~</span> Light)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>in the script (and send it the console) to plot <code>rmax</code> (<span class="math inline">\(y\)</span>) against <code>Light</code> (<span class="math inline">\(x\)</span>). The <code>~</code> sign implies “as a function of”. Alternatively, type <code>plot(Light,rmax)</code>. A linear regression would seem like a reasonable model for these data. We’ll soon be adding to it.</p>
<div class="cell" data-fig="true" height="2">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="no_solution_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<p><code>R</code>’s default plotting character is an open circle. Open symbols are generally better than closed symbols for plotting because it is easier to see where they overlap, but you could include <code>pch=16</code> in the <code>plot</code> command if you wanted closed circles instead. Figure 1 shows several more ways to adjust the appearance of lines and points in <code>R</code>.</p>
<p>To perform linear regression we create a linear model using the <code>lm</code> (<strong>l</strong>inear <strong>m</strong>odel) function:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">=</span> <span class="fu">lm</span>(rmax<span class="sc">~</span>Light)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(Note that linear model is read as “model <span class="math inline">\(r_{max}\)</span> as a function of light”.)</p>
<p>The <code>lm</code> command produces no output at all, but it creates <code>fit</code> as an <strong>object</strong>, i.e.&nbsp;a data structure consisting of multiple parts, holding the results of a regression analysis with <code>rmax</code> being modeled as a function of <code>Light</code>. Unlike most statistics packages, R rarely produces automatic summary output from an analysis. Statistical analyses in R are done by creating a model, and then giving additional commands to extract desired information about the model or display results graphically.</p>
<p>To get a summary of the results, enter the command <code>summary(fit)</code>. <code>R</code> sets up model objects (more on this later) so that the function <code>summary</code> “knows” that <code>fit</code> was created by <code>lm</code>, and produces an appropriate summary of results for an <code>lm</code> object:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>[If you’ve had (and remember) a statistics course the output will make sense to you. The table of coefficients gives the estimated regression line as <span class="math inline">\(r_{max} = 1.581 + 0.014 \times Light\)</span>, and associated with each coefficient is the standard error of the estimate, the <span class="math inline">\(t\)</span>-statistic value for testing whether the coefficient is nonzero, and the <span class="math inline">\(p\)</span>-value corresponding to the <span class="math inline">\(t\)</span>-statistic. Below the table, the adjusted R-squared gives the estimated fraction of the variance explained by the regression line, and the <span class="math inline">\(p\)</span>-value in the last line is an overall test for significance of the model against the null hypothesis that the response variable is independent of the predictors.]</p>
<p>You can add the regression line to the plot of the data with a function taking <code>fit</code> as its input (if you closed the plot of the data, you will need to create it again in order to add the regression line):</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(<code>abline</code>, pronounced “a b line”, is a general-purpose function for adding lines to a plot: you can specify horizontal or vertical lines, a slope and an intercept, or a regression model: <code>?abline</code>).</p>
<p>You can get the coefficients by using the <code>coef</code> function:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can also “interrogate” <code>fit</code> directly. Type <code>names(fit)</code> to get a list of the components of <code>fit</code>, and then use the <code>$</code> symbol to extract components according to their names.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For more information (perhaps more than you want) about <code>fit</code>, use <code>str(fit)</code> (for <strong>str</strong>ucture). You can get the regression coefficients this way:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>fit<span class="sc">$</span>coefficients</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>It’s good to be able to look inside <code>R</code> objects when necessary, but all other things being equal you should prefer (e.g.) <code>coef(x)</code> to <code>x$coefficients</code>.</p>
<p>Usually data is loaded from a file. To illustrate this, grab <code>Intro2.R</code> and <code>ChlorellaGrowth.txt</code> from brighspace to see how this is done. In <code>ChlorellaGrowth.txt</code> the two variables are entered as columns of a data matrix. Then instead of typing these in by hand, the command</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>X <span class="ot">=</span> <span class="fu">read.table</span>(<span class="st">"ChlorellaGrowth.txt"</span>,<span class="at">header=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>reads the file (<strong>from the current directory</strong>) and puts the data values into the variable <code>X</code>; <code>header=TRUE</code> specifies that the file includes column names. <strong>Note</strong> that as specified above you need to make sure that <code>R</code> is looking for the data file in the right place … either move the data file to your current working directory, or change the line so that it points to the actual location of the data file.</p>
<p>Extract the variables from <code>X</code> with the commands</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>Light <span class="ot">=</span> X[,<span class="dv">1</span>]</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>rmax <span class="ot">=</span> X[,<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Think of these as shorthand for “<code>Light</code> = everything in column 1 of <code>X</code>”, and “<code>rmax</code> = everything in column 2 of <code>X</code>” (we’ll learn about working with data matrices later). From there on out it’s the same as before, with some additions that set the axis labels and add a title.</p>
<div class="callout callout-style-default callout-important callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Make a copy of <code>Intro2.R</code> under a new name, and modify the copy so that it does linear regression of algal growth rate on the natural log of light intensity, <code>LogLight=log(Light)</code>, and plots the data appropriately.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Run <code>Intro2.R</code>, then enter the command <code>plot(fit)</code> in the console and follow the directions in the console. Figure out what just happened.</p>
</div>
</div>
</div>
<p>R produced a series of diagnostic plots exploring whether or not the fitted linear model is a suitable fit to the data. In each of the plots, the 3 most extreme points (the most likely candidates for “outliers”) have been identified according to their sequence in the data set.</p>
<p>The axes in plots are scaled automatically, but the outcome is not always ideal (e.g.&nbsp;if you want several graphs with exactly the same axis limits). You can use the <code>xlim</code> and <code>ylim</code> arguments in <code>plot</code> to control the limits: <code>plot(x,y,xlim=c(x1,x2), [other stuff])</code></p>
<p>will draw the graph with the <span class="math inline">\(x\)</span>-axis running from <code>x1</code> to <code>x2</code>, and using <code>ylim=c(y1,y2)</code> within the <code>plot</code> command will do the same for the <span class="math inline">\(y\)</span>-axis.</p>
<div class="callout callout-style-default callout-important callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Create a plot of growth rate versus light intensity with the <span class="math inline">\(x\)</span>-axis running from 0 to 120 and the <span class="math inline">\(y\)</span>-axis running from 1 to 4.</p>
</div>
</div>
</div>
<p>You can place several graphs within a single figure by using the <code>par</code> function (short for “parameter”) to adjust the layout of the plot. For example, the command</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>divides the plotting area into 2 rows and 3 columns. As <code>R</code> draws a series of graphs, it places them along the top row from left to right, then along the next row, and so on. <code>mfcol=c(2,3)</code> has the same effect except that <code>R</code> draws successive graphs down the first column, then down the second column, and so on.</p>
<div class="callout callout-style-default callout-important callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Modify the script as follows. Use <code>mfcol=c(2,1)</code> to create graphs of growth rate as a function of <code>Light</code>, and of <code>log(growth rate)</code> as a function of <code>log(Light)</code> in the same figure. Do the same again, using <code>mfcol=c(1,2)</code>.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Use <code>?plot</code> and <code>?par</code> to read about other plot control parameters. The function <code>plot</code> takes a number of arguments such as <code>type</code> that allows you to draw a line through a series of points instead of plotting separate points. With <code>par</code> you can change anything you want to change. For example, you can choose the coloor of the points, or the shape of the points. You should definitely skim read this help as this is one of the longest help files in the whole R system!).</p>
<p>Then draw a <span class="math inline">\(2 \times 2\)</span> set of plots, each showing the line <span class="math inline">\(y=5x + 3\)</span> with <span class="math inline">\(x\)</span> running from 3 to 8, but with 4 different line styles and 4 different line colors.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Modify one of your scripts so that at the very end it saves the plot to disk. In Windows you can do this with specific functions like <code>jpeg</code> or <code>png</code>. Use <code>?jpeg</code> or <code>?png</code> to read about these functions. Note that the argument <code>filename</code> can include the path to a folder; for example, in Windows you can use <code>filename="c:/temp/Intro2Figure.png".</code></p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Do some online research to figure out:</p>
<ul>
<li>How to rotate the y-axis labels</li>
<li>How to change the background of the plot to grey</li>
</ul>
</div>
</div>
</div>
</section>
</section>
<section id="data-types" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Data types</h1>
<p><code>R</code> distinguishes a number of data types including vectors, matrices, data frames and lists that each have special properties and which are used for calculations and data storage.</p>
<section id="vectors" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="vectors"><span class="header-section-number">4.1</span> Vectors</h2>
<p>An important class of data types are vectors and matrices (1- and 2-dimensional rectangular arrays of numbers). Operations with vectors and matrices may seem a bit abstract now, but we need them to do useful things later. The only properties of vectors are their type (or <em>class</em>) and length, although they can also have an associated list of names.</p>
<p>We’ve already seen two ways to create vectors in <code>R</code>:</p>
<ol type="1">
<li>A command in the console window or a script file listing the values, such as</li>
</ol>
<div class="sourceCode" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>initialsize<span class="ot">=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">9</span>,<span class="dv">11</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="2" type="1">
<li>Using <code>read.table</code>:</li>
</ol>
<div class="sourceCode" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>initialsize<span class="ot">=</span><span class="fu">read.table</span>(<span class="st">"c:/temp/initialdata.txt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(assuming of course that the file exists in the right place).</p>
<p>You can then use a vector in calculations as if it were a number (more or less)</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>finalsize<span class="ot">=</span>initialsize<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>finalsize</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>newsize<span class="ot">=</span><span class="fu">sqrt</span>(initialsize)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>newsize</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Notice that <code>R</code> applied each operation to every element in the vector. Similarly, commands like <code>initialsize-5, 2*initialsize, initialsize/10</code> apply subtraction, multiplication, and division to each element of the vector. The same is true for</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>initialsize<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In <code>R</code> the default is to apply functions and operations to vectors in an <em>element by element</em> (or “vectorized”) manner. This is an extremely useful propery in <code>R</code>.</p>
<section id="functions-for-creating-vectors" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="functions-for-creating-vectors"><span class="header-section-number">4.1.1</span> Functions for creating vectors</h3>
<p>You can use the <code>seq</code> function to create a set of regularly spaced values. <code>seq</code>’s syntax is <code>x=seq(from,to,by)</code> or <code>x=seq(from,to)</code> or <code>x=seq(from,to,length.out)</code>. The first form generates a vector starting with <code>from</code> with the last entry not extending further than than <code>to</code> in steps of <code>by</code>. In the second form the value of <code>by</code> is assumed to be 1 or -1, depending on whether <code>from</code> or <code>to</code> is larger. The third form creates a vector with the desired endpoints and length. The syntax <code>from:to</code> is a shortcut for <code>seq(from,to)</code>:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">8</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-important callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Use <code>seq</code> to create the vector <code>v=(1 5 9 13)</code>, and to create a vector going from 1 to 5 in increments of 0.2.</p>
</div>
</div>
</div>
<p>You can use <code>rep</code> to create a constant vector such as <code>(1 1 1 1)</code>; the basic syntax is <code>rep(values,lengths)</code>. For example,</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">3</span>,<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>creates a vector in which the value 3 is repeated 5 times. <code>rep</code> will repeat a whole vector multiple times</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>or will repeat each of the elements in a vector a given number of times:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="at">each=</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Even more flexibly, you can repeat each element in the vector a different number of times:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>( <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>),<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 3 4 4 4 4 4</code></pre>
</div>
</div>
<p>The value 3 was repeated 2 times, followed by the value 4 repeated 5 times. <code>rep</code> can be a little bit mind-blowing as you get started, but it will turn out to be useful.</p>
<p>Table 3 lists some of the main functions for creating and working with vectors.</p>
</section>
<section id="vector-indexing" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="vector-indexing"><span class="header-section-number">4.1.2</span> Vector indexing</h3>
<p>You will often want to extract a specific entry or other part of a vector. This procedure is called <em>vector indexing</em>, and uses square brackets (<code>[]</code>):</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">9</span>,<span class="dv">11</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>z[<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>z[3]</code> extracts the third item, or <em>element</em>, in the vector <code>z</code>. You can also access a block of elements using the functions for vector construction, e.g.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>z[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>extracts the second through fifth elements.</p>
<p>What happens if you enter <code>v=z[seq(1,5,2)]</code> ? Try it and see, and make sure you understand what happened.</p>
<p>You can extracted irregularly spaced elements of a vector. For example</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>z[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">5</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can also use indexing to <strong>set specific values within a vector</strong>. For example,</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>z[<span class="dv">1</span>]<span class="ot">=</span><span class="dv">12</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>changes the value of the first entry in <code>z</code> while leaving all the rest alone, and</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>z[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>)]<span class="ot">=</span><span class="fu">c</span>(<span class="dv">22</span>,<span class="dv">33</span>,<span class="dv">44</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>changes the first, third, and fifth values (note that we had to use <code>c</code> to create the vector — can you interpret the error message you get if you try <code>z[1,3,5]</code> ?)</p>
<div class="callout callout-style-default callout-important callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Write a <em>one-line</em> command to extract a vector consisting of the second, first, and third elements of <code>z</code> <em>in that order</em>.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Write a script file that computes values of <span class="math inline">\(y=\frac{(x-1)}{(x+1)}\)</span> for <span class="math inline">\(x=1,2,\cdots,10\)</span>, and plots <span class="math inline">\(y\)</span> versus <span class="math inline">\(x\)</span> with the points plotted and connected by a line <em>hint:</em> in <code>?plot</code>, search for <code>type</code>.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The sum of the geometric series <span class="math inline">\(1 + r + r^2 + r^3 + ... + r^n\)</span> approaches the limit <span class="math inline">\(1/(1-r)\)</span> for <span class="math inline">\(r &lt; 1\)</span> as <span class="math inline">\(n \rightarrow \infty\)</span>.</p>
<p>Set the values <span class="math inline">\(r=0.5\)</span> and <span class="math inline">\(n=10\)</span>, and then write a <em>one-line</em> command that creates the vector <span class="math inline">\(G = (r^0,r^1,r^2,...,r^n)\)</span>. Compare the sum (using <code>sum</code>) of this vector to the limiting value <span class="math inline">\(1/(1-r)\)</span>.</p>
<p>Repeat for <span class="math inline">\(n=50\)</span>. (<em>Note</em> that comparing very similar numeric values can be tricky: rounding can happen, and some numbers cannot be represented exactly in binary (computer) notation. By default <code>R</code> displays 7~significant digits (<code>options("digits")</code>).</p>
<p>For example:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fl">1.999999</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>x<span class="dv">-2</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>x<span class="ot">=</span><span class="fl">1.9999999999999</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>x<span class="dv">-2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>All the digits are still there, in the second case, but they are not shown. Also note that <code>x-2</code> is not exactly <span class="math inline">\(-1 \times 10^{-13}\)</span>; this is unavoidable.)</p>
</div>
</div>
</div>
</section>
<section id="logical-operators" class="level3" data-number="4.1.3">
<h3 data-number="4.1.3" class="anchored" data-anchor-id="logical-operators"><span class="header-section-number">4.1.3</span> Logical operators</h3>
<p>Logical operators return a value of <code>TRUE</code> or <code>FALSE</code>. For example, try:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>a<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>b<span class="ot">=</span><span class="dv">3</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>d<span class="ot">=</span>a<span class="sc">&lt;</span>b</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>e<span class="ot">=</span>(a<span class="sc">&gt;</span>b)</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>d</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>e</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The parentheses around (<code>a&gt;b</code>) are optional but make the code easier to read. One special case where you <em>do</em> need parentheses (or spaces) is when you make comparisons with negative values; <code>a&lt;-1</code> will surprise you by setting <code>a=1</code>, because <code>&lt;-</code> (representing a left-pointing arrow) is equivalent to <code>=</code> in <code>R</code>. Use <code>a&lt; -1</code>, or more safely <code>a&lt;(-1)</code>, to make this comparison.</p>
<p>When we compare two vectors or matrices of the same size, or compare a number with a vector or matrix, comparisons are done element-by-element. For example,</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>b<span class="ot">=</span>(x<span class="sc">&lt;=</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>So if <code>x</code> and <code>y</code> are vectors, then <code>(x==y)</code> will return a vector of values giving the element-by-element comparisons. If you want to know whether <code>x</code> and <code>y</code> are identical vectors, use <code>identical(x,y)</code> which returns a single value: <code>TRUE</code> if each entry in <code>x</code> equals the corresponding entry in <code>y</code>, otherwise <code>FALSE</code>. You can use <code>?Logical</code> to read more about logical operators. Note the difference between = and ==</p>
<div class="callout callout-style-default callout-important callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Run the code block below. Can you figure out why <code>a==b</code> gives different results the first and second time you execute them?</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">=</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>a<span class="sc">==</span>b</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>a<span class="ot">=</span>b</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>a<span class="sc">==</span>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Exclamation marks <code>!</code> are used in <code>R</code> to mean “not”; <code>!=</code> (not <code>==</code>) means “not equal to”.</p>
<p><code>R</code> also does arithmetic on logical values, treating <code>TRUE</code> as 1 and <code>FALSE</code> as 0. So <code>sum(b)</code> returns the value 3, telling us that three entries of <code>x</code> satisfied the condition (<code>x&lt;=3</code>). This is useful for (e.g.) seeing how many of the elements of a vector are larger than a cutoff value. Build more complicated conditions by using <em>logical operators</em> to combine comparisons:</p>
<ul>
<li><code>!</code>: Negation</li>
<li><code>&amp;</code>, <code>&amp;&amp;</code>: AND</li>
<li><code>|</code>, <code>||</code>: OR</li>
</ul>
<p>OR is <em>non-exclusive</em>, meaning that <code>x|y</code> is true if either <code>x</code> or <code>y</code> <em>or both</em> are true (a ham-and-cheese sandwich would satisfy the condition “ham OR cheese”). For example, try</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">5</span>)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>(a <span class="sc">&lt;</span> b) <span class="sc">&amp;</span> (a <span class="sc">&gt;</span> <span class="dv">3</span>)</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>(a <span class="sc">&lt;</span> b) <span class="sc">|</span> (a <span class="sc">&gt;</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>and make sure you understand what happened. If it’s confusing, try breaking up the expression and looking at the results of <code>a&lt;b</code> and <code>a&gt;3</code> separately first. The two forms of AND and OR differ in how they handle vectors. The shorter one does element-by-element comparisons; the longer one only looks at the first element in each vector.</p>
<p>We can also use <em>logical</em> vectors (lists of <code>TRUE</code> and <code>FALSE</code> values) to pick elements out of vectors. This is important, e.g., for subsetting data (getting rid of those pesky outliers!)</p>
<p>As a simple example, we might want to focus on just the low-light values of <span class="math inline">\(r_{max}\)</span> in the <em>Chlorella</em> example:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>X<span class="ot">=</span><span class="fu">read.table</span>(<span class="st">"ChlorellaGrowth.txt"</span>,<span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>Light<span class="ot">=</span>X[,<span class="dv">1</span>]</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>rmax<span class="ot">=</span>X[,<span class="dv">2</span>]</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>lowLight <span class="ot">=</span> Light[Light<span class="sc">&lt;</span><span class="dv">50</span>]</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>lowLightrmax <span class="ot">=</span> rmax[Light<span class="sc">&lt;</span><span class="dv">50</span>]</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>lowLight</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>lowLightrmax</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>What is really happening here (think about it for a minute) is that <code>Light&lt;50</code> generates a logical vector the same length as <code>Light</code> (<code>TRUE TRUE TRUE ...</code>) which is then used to select the appropriate values.</p>
<p>If you want the positions at which <code>Light</code> is lower than 50, you could say <code>(1:length(Light))[Light&lt;50]</code>, but you can also use a built-in function: <code>which(Light&lt;50)</code>. If you wanted the position at which the maximum value of <code>Light</code> occurs, you could say <code>which(Light==max(Light))</code>. (This normally results in a vector of length 1; when could it give a longer vector?) There is even a built-in command for this specific function, <code>which.max</code> (although <code>which.max</code> always returns just the <em>first</em> position at which the maximum occurs).</p>
<div class="callout callout-style-default callout-important callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>What would happen if instead of setting <code>lowLight</code> you replaced <code>Light</code> by saying <code>Light=Light[Light&lt;50]</code>, and then <code>rmax=rmax[Light&lt;50]</code>?</p>
<p>Why would that be wrong?</p>
<p>Try it with some temporary variables — set <code>Light2=Light</code> and <code>rmax2=rmax</code> and then play with <code>Light2</code> and <code>rmax2</code> so you dont mess up your working variables — and work out what happened…</p>
<p>We can also combine logical operators (making sure to use the element-by-element <code>&amp;</code> and <code>|</code> versions of AND and OR):</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><code>runif(n)</code> is a function (more on it soon) that generates a vector of <code>n</code> random, uniformly distributed numbers between 0 and 1. Create a vector of 20 numbers, then select the subset of those numbers that is less than the mean. (If you want your answers to match mine exactly, use <code>set.seed(273)</code> to set the random-number generator to a particular starting point before you use <code>runif</code>. [273 is an arbitrary number I chose].)</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Find the <em>positions</em> of the elements that are less than the mean of the vector you just created (e.g.&nbsp;if your vector were <code>(0.1 0.9. 0.7 0.3)</code> the answer would be <code>(1 4)</code>).</p>
</div>
</div>
</div>
<p>As I mentioned in passing above, vectors can have names associated with their elements: if they do, you can also extract elements by name (use <code>names</code> to find out the names).</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="at">first=</span><span class="dv">7</span>,<span class="at">second=</span><span class="dv">5</span>,<span class="at">third=</span><span class="dv">2</span>)</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(x)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>x[<span class="st">"first"</span>]</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="st">"third"</span>,<span class="st">"first"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Finally, it is sometimes handy to be able to drop a particular set of elements, rather than taking a particular set: you can do this with negative indices. For example, <code>x[-1]</code> extracts all but the first element of a vector.</p>
<div class="callout callout-style-default callout-important callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-17-contents" aria-controls="callout-17" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-17" class="callout-17-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Specify two ways to take only the elements in the odd positions (first, third, …) of a vector of arbitrary length.</p>
</div>
</div>
</div>
</section>
</section>
<section id="matrices" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="matrices"><span class="header-section-number">4.2</span> Matrices</h2>
<section id="creating-matrices" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="creating-matrices"><span class="header-section-number">4.2.1</span> Creating matrices</h3>
<p>A matrix is a two-dimensional array, and has the same kind of variables in every column. You can create matrices of numbers by creating a vector of the matrix entries, and then reshaping them to the desired number of rows and columns using the function <code>matrix</code>. For example</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">X =</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>,<span class="at">nrow=</span><span class="dv">2</span>,<span class="at">ncol=</span><span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>takes the values 1 to 6 and reshapes them into a 2 by 3 matrix.</p>
<p>By default <code>R</code> loads the values into the matrix <em>column-wise</em> (this is probably counter-intuitive since we’re used to reading tables row-wise). Use the optional parameter <code>byrow</code> to change this behavior. For example:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">A =</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>,<span class="at">nrow=</span><span class="dv">3</span>,<span class="at">ncol=</span><span class="dv">3</span>,<span class="at">byrow=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>R</code> will re-cycle through entries in the data vector, if necessary to fill a matrix of the specified size. So for example</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">matrix</span>(<span class="dv">1</span>,<span class="at">nrow=</span><span class="dv">10</span>,<span class="at">ncol=</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>creates a <span class="math inline">\(10 \times 10\)</span> matrix of ones.</p>
<div class="callout callout-style-default callout-important callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Use a command of the form <code>X = matrix(v,nrow=2,ncol=4)</code> where <code>v</code> is a data vector, to create the following matrix <code>X</code>:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4]
[1,]    1    1    1    1
[2,]    2    2    2    2</code></pre>
</div>
</div>
<p>If you can, try to use <code>R</code> commands to construct the vector rather than typing out all of the individual values.</p>
<p><code>R</code> will also collapse a matrix to behave like a vector whenever it makes sense: for example <code>sum(X)</code> above is 12.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-19-contents" aria-controls="callout-19" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-19" class="callout-19-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Use <code>rnorm</code> (which is like <code>runif</code>, but generates Gaussian (normally distributed) numbers with a specified mean and standard deviation instead) and <code>matrix</code> to create a <span class="math inline">\(5 \times 7\)</span> matrix of Gaussian random numbers with mean 1 and standard deviation 2. (Use <code>set.seed(273)</code> again for consistency).</p>
</div>
</div>
</div>
<p>Another useful function for creating matrices is <code>diag</code>. <code>diag(v,n)</code> creates an <span class="math inline">\(n \times n\)</span> matrix with data vector <span class="math inline">\(v\)</span> on its diagonal. So for example <code>diag(1,5)</code> creates the <span class="math inline">\(5 \times 5\)</span> <em>identity matrix</em>, which has 1’s on the diagonal and 0 everywhere else. Try <code>diag(1:5,5)</code> and <code>diag(1:2,5)</code>; Observe what is happening. Is this desired behaviour?</p>
<p>Finally, you can use the <code>data.entry</code> function. This function can only edit existing matrices, but for example</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>A<span class="ot">=</span><span class="fu">matrix</span>(<span class="dv">0</span>,<span class="at">nrow=</span><span class="dv">3</span>,<span class="at">ncol=</span><span class="dv">4</span>)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data.entry</span>(A)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>will create <code>A</code> as a <span class="math inline">\(3 \times 4\)</span> matrix, and then call up a spreadsheet-like interface in which you can change the values to whatever you need.</p>
<div class="cell" data-result="asis">
<div class="cell-output-display">

</div>
</div>
</section>
<section id="cbind-and-rbind" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="cbind-and-rbind"><span class="header-section-number">4.2.2</span> <code>cbind</code> and <code>rbind</code></h3>
<p>If their sizes match, you can combine vectors to form matrices, and stick matrices together with vectors or other matrices. <code>cbind</code> (“column bind”) and <code>rbind</code> (“row bind”) are the functions to use.</p>
<p><code>cbind</code> binds together columns of two objects. One thing it can do is put vectors together to form a matrix:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">C =</span> <span class="fu">cbind</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>,<span class="dv">5</span><span class="sc">:</span><span class="dv">7</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>R</code> interprets vectors as row or column vectors according to what you’re doing with them. Here it treats them as column vectors so that columns exist to be bound together. On the other hand,</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">D =</span> <span class="fu">rbind</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>treats them as rows. Now we have two matrices that can be combined.</p>
<div class="callout callout-style-default callout-important callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-20-contents" aria-controls="callout-20" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-20" class="callout-20-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Verify that <code>rbind(C,D)</code> works, <code>cbind(C,C)</code> works, but <code>cbind(C,D)</code> doesn’t. Why not?</p>
</div>
</div>
</div>
</section>
<section id="matrix-indexing" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="matrix-indexing"><span class="header-section-number">4.2.3</span> Matrix indexing</h3>
<p>Matrix indexing is like vector indexing except that you have to specify both the row and column, or range of rows and columns. For example <code>z=A[2,3]</code> sets <code>z</code> equal to 6, which is the (2nd row, 3rd column) entry of the matrix <strong>A</strong> that you recently created, and</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>A[<span class="dv">2</span>,<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>(<span class="at">B=</span>A[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>There is an easy shortcut to extract entire rows or columns: leave out the limits, leaving a blank before or after the comma.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">first.row=</span>A[<span class="dv">1</span>,])</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>(<span class="at">second.column=</span>A[,<span class="dv">2</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(What does <code>A[,]</code> do?)</p>
<p>As with vectors, indexing also works in reverse for assigning values to matrix entries. For example,</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>(A[<span class="dv">1</span>,<span class="dv">1</span>]<span class="ot">=</span><span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can do the same with blocks, rows, or columns, for example</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>(A[<span class="dv">1</span>,]<span class="ot">=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you use <code>which</code> on a matrix, <code>R</code> will normally treat the matrix as a vector — so for example <code>which(A==8)</code> will give the answer 6 (figure out why). However, <code>which</code> does have an option that will treat its argument as a matrix:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(A<span class="sc">==</span><span class="dv">8</span>,<span class="at">arr.ind=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="lists" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="lists"><span class="header-section-number">4.3</span> Lists</h2>
<p>While vectors and matrices may seem familiar, lists are probably new to you. Vectors and matrices have to contain elements that are all the same type: lists in <code>R</code> can contain anything — vectors, matrices, other lists… Indexing lists is a little different too: use double square brackets <code>[[ ]]</code> (rather than single square brackets as for a vector) to extract an element of a list by number or name, or <code>$</code> to extract an element by name (only). Given a list like this:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>L <span class="ot">=</span> <span class="fu">list</span>(<span class="at">A=</span>x,<span class="at">B=</span>y,<span class="at">C=</span><span class="fu">c</span>(<span class="st">"a"</span>,<span class="st">"b"</span>,<span class="st">"c"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then <code>L$A</code>, <code>L[["A"]]</code>, and <code>L[[1]]</code> will all grab the first element of the list.</p>
<p>You won’t use lists too much at the beginning, but many of <code>R</code>’s own results are structured in the form of lists.</p>
</section>
<section id="data-frames" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="data-frames"><span class="header-section-number">4.4</span> Data frames</h2>
<p>Data frames are the solution to the problem that most data sets have several different kinds of variables observed for each sample (e.g.&nbsp;categorical site location and continuous rainfall), but matrices can only contain a single type of data. Data frames are a hybrid of lists and vectors; internally, they are a list of vectors that may be of different types but must all be the same length, but you can do most of the same things with them (e.g., extracting a subset of rows) that you can do with matrices. You can index them either the way you would index a list, using <code>[[ ]]</code> or <code>$</code> — where each variable is a different item in the list — or the way you would index a matrix. Use <code>as.matrix</code> if you have a data frame (where all variables are the same type) that you really want to be a matrix, e.g.&nbsp;if you need to transpose it (use <code>as.data.frame</code> to go the other way).</p>
</section>
</section>
<section id="references-acknowlegdements" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> References &amp; Acknowlegdements</h1>
<p>These notes are based in part on course materials by former TAs Colleen Webb, Jonathan Rowell and Daniel Fink at Cornell, Professors Lou Gross (University of Tennessee) and Paul Fackler (NC State University), and on the book <em>Getting Started with Matlab</em> by Rudra Pratap (Oxford University Press). They also draw on the documentation supplied with <code>R</code>. They parallel, but go into more depth than, the chapter supplement for the book <em>Ecological Models and Data in <code>R</code></em>.</p>
<p>You can find many other similar introductions scattered around the web, or in the “contributed documentation” section on the <code>R</code> web site (http://cran.r-project.org/other-docs.html). This particular version is limited (it has similar coverage to Sections 1 and 2 of the <em>Introduction to <code>R</code></em> that comes with <code>R</code>) and targets biologists who are neither programmers nor statisticians.</p>
<p>Fussmann, G., S. P. Ellner, K. W. Shertzer and J. N. G. Hairston. 2000. Crossing the Hopf bifurcation in a live predator-prey system. Science <strong>290</strong>:1358-1360.</p>
<p>Ihaka, <code>R</code>. and <code>R</code>. Gentleman. 1996. <code>R</code>: A language for data analysis and graphics. Journal of Computational and Graphical Statistics <strong>5</strong>:299-314.</p>
<p>Venables and Ripley. 2002. Modern Applied Statistics with S. Springer, New York. 4th edition.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/AleMorales\.github\.io\/EcologicalModelsLabs\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>